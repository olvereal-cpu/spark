<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Spark Dating</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        body { font-family: -apple-system, sans-serif; background-color: #000; color: white; margin: 0; display: flex; flex-direction: column; height: 100vh; justify-content: center; align-items: center; overflow: hidden; }
        .card-container { position: relative; width: 92vw; height: 72vh; }
        .card { position: absolute; width: 100%; height: 100%; border-radius: 24px; overflow: hidden; display: none; background: #1a1a1a; box-shadow: 0 10px 30px rgba(0,0,0,0.6); border: 1px solid #333; }
        .card.active { display: block; }
        .card img { width: 100%; height: 100%; object-fit: cover; transition: 0.3s; }
        
        /* VIP –ë–ï–ô–î–ñ–ò–ö –ù–ê –§–û–¢–û */
        .vip-badge { position: absolute; top: 15px; right: 15px; background: linear-gradient(45deg, #ffbd00, #ff9500); color: black; padding: 5px 12px; border-radius: 12px; font-size: 12px; font-weight: bold; display: flex; align-items: center; gap: 4px; box-shadow: 0 4px 10px rgba(0,0,0,0.3); z-index: 5; }
        
        .info { position: absolute; bottom: 0; width: 100%; padding: 30px 20px; background: linear-gradient(to top, rgba(0,0,0,1) 40%, rgba(0,0,0,0.6) 70%, transparent); box-sizing: border-box; }
        .name { font-size: 28px; font-weight: bold; margin-bottom: 6px; }
        .desc { font-size: 15px; color: #ccc; line-height: 1.4; text-shadow: 1px 1px 2px rgba(0,0,0,0.5); }
        
        .controls { display: flex; gap: 25px; margin-top: 30px; z-index: 5; }
        .btn { width: 70px; height: 70px; border-radius: 50%; border: none; display: flex; justify-content: center; align-items: center; cursor: pointer; font-size: 30px; transition: 0.2s; box-shadow: 0 4px 15px rgba(0,0,0,0.3); }
        .btn-no { background: #262626; color: #ff4444; }
        .btn-yes { background: linear-gradient(45deg, #ff3366, #ff6633); color: white; }
        .btn:active { transform: scale(0.85); }

        /* VIP –ë–ª–æ–∫ –û–ø–ª–∞—Ç—ã */
        .blur { filter: blur(20px); transform: scale(1.1); }
        .pay-overlay { position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.85); display: flex; flex-direction: column; justify-content: center; align-items: center; z-index: 100; text-align: center; padding: 25px; box-sizing: border-box; animation: fadeIn 0.5s; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        
        .feature-item { font-size: 15px; margin-bottom: 14px; display: flex; align-items: center; gap: 10px; width: 100%; max-width: 240px; text-align: left; }
        .pay-btn { background: #fff; color: #000; border: none; padding: 18px 45px; border-radius: 35px; font-weight: bold; font-size: 17px; margin-top: 25px; cursor: pointer; transition: 0.3s; }
        .pay-btn:active { background: #ddd; transform: scale(0.95); }
    </style>
</head>
<body>

    <div class="card-container" id="container"></div>

    <div class="controls" id="controls">
        <button class="btn btn-no" onclick="nextCard()">‚úñ</button>
        <button class="btn btn-yes" onclick="nextCard()">‚ù§Ô∏è</button>
    </div>

    <script>
        const tg = window.Telegram.WebApp;
        tg.expand();

        const urlParams = new URLSearchParams(window.location.search);
        const isVip = urlParams.get('is_vip') === '1';

        // –°–ø–∏—Å–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Å –æ–ø–∏—Å–∞–Ω–∏—è–º–∏ –∏ –æ—Ç–º–µ—Ç–∫–æ–π Premium
        const users = [
            {name: "–ê–ª—ë–Ω–∞, 21", isPremium: false, desc: "–£—á—É—Å—å –Ω–∞ –¥–∏–∑–∞–π–Ω–µ—Ä–∞. –ü–æ—à–ª–∏ –ø–∏—Ç—å –∫–æ—Ñ–µ –∏ –æ–±—Å—É–∂–¥–∞—Ç—å –∏—Å–∫—É—Å—Å—Ç–≤–æ? ‚òïÔ∏è", img: "https://images.unsplash.com/photo-1524504388940-b1c1722653e1?w=600"},
            {name: "–ú–∞—Ä–∏—è, 19", isPremium: false, desc: "–û–±–æ–∂–∞—é —Ç–∞–Ω—Ü—ã –∏ –ø—É—Ç–µ—à–µ—Å—Ç–≤–∏—è. –ò—â—É –∫–æ–º–ø–∞–Ω–∏—é –¥–ª—è –ø—Ä–∏–∫–ª—é—á–µ–Ω–∏–π! ‚úàÔ∏è", img: "https://images.unsplash.com/photo-1517841905240-472988babdf9?w=600"},
            {name: "–õ–∏–∑–∞, 23", isPremium: true, desc: "–ü–∏—à—É –∫–æ–¥ –Ω–∞ Python. –†–∞—Å—Å–∫–∞–∂–∏ –æ —Å–≤–æ–µ–π –ª—é–±–∏–º–æ–π –∏–≥—Ä–µ? üéÆ", img: "https://images.unsplash.com/photo-1539571696357-5a69c17a67c6?w=600"},
            {name: "–Æ–ª—è, 20", isPremium: true, desc: "–§–æ—Ç–æ–≥—Ä–∞—Ñ. –°–¥–µ–ª–∞—é —Ç–µ–±–µ –ª—É—á—à–∏–µ –∫–∞–¥—Ä—ã –≤ –∂–∏–∑–Ω–∏! –õ—é–±–ª—é –∏—Å–∫—Ä–µ–Ω–Ω–æ—Å—Ç—å ‚ú®", img: "https://images.unsplash.com/photo-1494790108377-be9c29b29330?w=600"}
        ];

        let current = 0;

        function render() {
            const container = document.getElementById('container');
            container.innerHTML = '';

            users.forEach((u, i) => {
                const card = document.createElement('div');
                card.className = `card ${i === current ? 'active' : ''}`;

                // –ï—Å–ª–∏ –¥–æ—à–ª–∏ –¥–æ 4-–π –∞–Ω–∫–µ—Ç—ã –∏ —é–∑–µ—Ä –Ω–µ VIP
                if (!isVip && i >= 3) {
                    card.innerHTML = `
                        <img src="${u.img}" class="blur">
                        <div class="pay-overlay">
                            <h2 style="color: #ffbd00; margin-bottom: 10px;">üëë GOLD VIP</h2>
                            <p style="font-size: 14px; opacity: 0.8; margin-bottom: 25px;">–ë–æ–ª—å—à–µ –∞–Ω–∫–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–æ —Ç–æ–ª—å–∫–æ VIP-–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º</p>
                            
                            <div style="display: flex; flex-direction: column; align-items: center;">
                                <div class="feature-item">üöÄ <b>–ë–µ–∑–ª–∏–º–∏—Ç –ª–∞–π–∫–æ–≤</b></div>
                                <div class="feature-item">üëÄ <b>–ö—Ç–æ —Ç–µ–±—è –ª–∞–π–∫–Ω—É–ª</b></div>
                                <div class="feature-item">üåü <b>–ó–æ–ª–æ—Ç–æ–π —Å—Ç–∞—Ç—É—Å</b></div>
                                <div class="feature-item">üî• <b>–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç –≤ –ª–µ–Ω—Ç–µ</b></div>
                            </div>

                            <button class="pay-btn" onclick="goToPay()">–ê–ö–¢–ò–í–ò–†–û–í–ê–¢–¨ –ó–ê 50 ‚≠êÔ∏è</button>
                        </div>
                    `;
                    document.getElementById('controls').style.display = 'none';
                } else {
                    card.innerHTML = `
                        ${u.isPremium ? '<div class="vip-badge">üëë VIP</div>' : ''}
                        <img src="${u.img}">
                        <div class="info">
                            <div class="name">${u.name}</div>
                            <div class="desc">${u.desc}</div>
                        </div>
                    `;
                }
                container.appendChild(card);
            });
        }

        function nextCard() {
            if (current < users.length - 1) {
                current++;
                tg.HapticFeedback.impactOccurred('medium');
                render();
            }
        }

        function goToPay() {
            tg.HapticFeedback.impactOccurred('heavy');
            
            // 1. –ü–æ—Å—ã–ª–∞–µ–º —Å–∏–≥–Ω–∞–ª –±–æ—Ç—É
            tg.sendData("buy_vip");

            // 2. –ó–ê–ü–ê–°–ù–û–ô –í–ê–†–ò–ê–ù–¢: –ü—Ä—è–º–∞—è —Å—Å—ã–ª–∫–∞ –Ω–∞ –±–æ—Ç–∞
            // –í–ê–ñ–ù–û: –ó–ê–ú–ï–ù–ò –ù–ê –°–í–û–ô –Æ–ó–ï–†–ù–ï–ô–ú!
            const botUser = "GetSparkBot"; 
            tg.openTelegramLink(`https://t.me/${botUser}?start=pay_vip`);
            
            setTimeout(() => { tg.close(); }, 300);
        }

        render();
    </script>
</body>
</html>
